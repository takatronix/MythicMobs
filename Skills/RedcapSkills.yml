#RedCap
#ターゲットへ毒のスプラッシュポーションを投げる
RedcapPoisonPotion:
  Skills:
  - shootpotion{type=POISON;duration=60;level=1;velocity=3} @target
  - delay 8
  - sound{s=entity.witch.celebrate;p=0.6;v=0.8} @self

#プレイヤーが半径5ブロックにいる時、プレイヤーから距離をとる
#RedcapAway:
#  TargetConditions:
#  - distance{d=<5}
#  - entitytype{t=PLAYER} true
#  - health{a=>80} true
#  Skills:
#  - runaigoalselector{goal=fleeplayers}
#  - potion{t=SPEED;d=100;l=1;p=false} @self
#  - delay 20
#  - potionclear{} @self

#金ブロック上にいる時、ターゲットへスプラッシュポーションを投げる
RedcapGoldTrap:
  Conditions:
  - onblock{m=GOLD_BLOCK} true
  Skills:
  - shootpotion{type=SLOW;duration=80;level=3;velocity=3} @target

#自分の半径のランダム座標へ山なりに１つトラバサミを投げ、その座標にLegTrapをスポーン
LegTrapThrow:
  Cooldown: 2
  Skills:
  - projectile{bulletType=MYTHICITEM;material=LegTrap_Open;oT=LegTrapThrowTick;oH=LegTrapThrowHit;oE=LegTrapThrowEnd;i=1;hp=false;hnp=false;sE=false;v=7;mr=16;vO=2;g=0.9} @RLNTE{a=1;r=5;s=3;minr=3}
  - sound{s=entity.splash_potion.throw;p=0.6}
LegTrapThrowTick:
  Skills:
  - effect:particles{p=crit;a=1;hs=0;vs=0} @origin
LegTrapThrowEnd:
  Skills:
  - effect:particles{p=smoke;a=10;hs=0.25;vs=0.4} @origin
  - sound{s=entity.horse.armor;p=0.5} @origin
  - delay 2
  - summon{t=LegTrap}

#自分の半径のランダム座標へ山なりに２つトラバサミを投げ、その座標にLegTrapをスポーン
LegTrap2Throw:
  Cooldown: 6
  Skills:
  - projectile{bulletType=MYTHICITEM;material=LegTrap_Open;oT=LegTrapThrow2Tick;oH=LegTrapThrow2Hit;oE=LegTrapThrow2End;i=1;hp=false;hnp=false;sE=false;v=8;mr=16;vO=2;g=0.9} @RLNTE{a=2;r=10;s=5;minr=6}
  - sound{s=entity.splash_potion.throw;p=0.6}
  - delay 6
  - sound{s=entity.splash_potion.throw;p=0.6}
LegTrapThrow2Tick:
  Skills:
  - effect:particles{p=crit;a=1;hs=0;vs=0} @origin
LegTrapThrow2End:
  Skills:
  - effect:particles{p=smoke;a=10;hs=0.25;vs=0.4} @origin
  - sound{s=entity.horse.armor;p=0.5} @origin
  - delay 2
  - summon{t=LegTrap}

#死亡時、パーティクルと範囲内のプレイヤーへメッセージと周りのLegTrapを削除
RedCapDeath:
  Skills:
  - effect:particlesphere{p=cloud;a=40;hS=0.6;vS=0.6;s=3;r=6} @self 
#  - delay 4
#  - message{m="<mob.name>&f<&co> ぐはっ、ここまでか...。"} @PIR{r=30}
  - delay 20
  - signal{s=RedCapDead} @MIR{r=30;t=LegTrap}
#  - delay 10
#  - command{c="mythicmobs i give <trigger.name> KingSlime_Core"} @Trigger ~onDeath
#  - command{c="dm end <trigger.name> pve1"} @Trigger ~onDeath


#LegTrap
#攻撃時AIを無くして頭に別の3Dモデルを装備、パーティクルとダメージとポーション効果を付与し、遅延で自身を消滅（浮遊のポーション効果を負の値で付けて速度低下の効果を高める）
#無敵時間を含めることで、アクティブになってから殺されるのを回避
LegTrapActivate:
  Skills:
  - setNoDamageTicks{ticks=110} @self
  - runaigoalselector{goal=clear} @self
  - equip{item=LegTrap_Close HEAD}
  - sound{s=block.anvil.place;p=0.6;v=0.5} @self
  - delay 1
  - effect:particles{p=smoke;a=10;hs=0.25;vs=0.4} @origin
  - damage{a=4;ia=true} @PIR{r=2}
  - potion{t=SLOW;d=120;l=4;p=false;icon=false} @PIR{r=2}
  - potion{t=LEVITATION;d=120;l=-20;p=false;icon=false} @PIR{r=2}
  - delay 4
  - sound{s=entity.witch.celebrate;p=0.5;v=0.8} @self
  - delay 96
  - remove @self

#死亡時に自身を消滅
LegTrapRemove:
  Skills:
  - effect:particles{p=cloud;a=5;hs=0.25;vs=0.25} @origin
  - sound{s=entity.item.break;p=0.6;v=0.6} @self
  - delay 4
  - remove @self
  

